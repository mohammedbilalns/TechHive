<%- include('../partials/adminheader') %>

<!-- Mobile Menu Button -->
<div class="md:hidden p-4 bg-gray-100 flex justify-between items-center">
  <h1 class="text-xl font-semibold text-gray-800">Admin Dashboard</h1>
  <button 
    onclick="toggleSidebar()"
    class="text-gray-600 hover:text-gray-900"
  >
    <i class="fas fa-bars text-xl"></i>
  </button>
</div>

<div class="flex flex-col md:flex-row">
  <!-- Sidebar -->
  <aside id="sidebar" class="bg-gray-100 w-full md:w-64 min-h-screen hidden md:block transform transition-transform duration-300 ease-in-out">
    <nav class="py-4">
      <div class="px-4 md:px-6">
        <h2 class="text-sm font-semibold text-gray-600 uppercase">Menu</h2>
        <ul class="mt-4 space-y-2">
          <li>
            <a href="/dashboard" class="flex items-center px-4 py-2 text-gray-800 hover:bg-gray-200 rounded-lg">
              <i class="fas fa-th-large mr-3"></i> 
              <span>Dashboard</span>
            </a>
          </li>
          <li>
            <a href="/products" class="flex items-center px-4 py-2 text-gray-800 hover:bg-gray-200 rounded-lg">
              <i class="fas fa-box mr-3"></i> 
              <span>Products</span>
            </a>
          </li>
          <li>
            <a href="/categories" class="flex items-center px-4 py-2 text-gray-800 hover:bg-gray-200 rounded-lg">
              <i class="fas fa-layer-group mr-3"></i> 
              <span>Category</span>
            </a>
          </li>
          <li>
            <a href="/orders" class="flex items-center px-4 py-2 text-gray-800 hover:bg-gray-200 rounded-lg">
              <i class="fas fa-shopping-cart mr-3"></i> 
              <span>Orders</span>
            </a>
          </li>
          <li>
            <a href="/coupons" class="flex items-center px-4 py-2 text-gray-800 hover:bg-gray-200 rounded-lg">
              <i class="fas fa-ticket-alt mr-3"></i> 
              <span>Coupon</span>
            </a>
          </li>
          <li>
            <a href="/banners" class="flex items-center px-4 py-2 text-gray-800 hover:bg-gray-200 rounded-lg">
              <i class="fas fa-images mr-3"></i> 
              <span>Banner</span>
            </a>
          </li>
          <li>
            <a href="/transactions" class="flex items-center px-4 py-2 text-gray-800 hover:bg-gray-200 rounded-lg">
              <i class="fas fa-receipt mr-3"></i> 
              <span>Transaction</span>
            </a>
          </li>
        </ul>
      </div>
      
      <div class="px-4 md:px-6 mt-8">
        <h2 class="text-sm font-semibold text-gray-600 uppercase">User Management</h2>
        <ul class="mt-4 space-y-2">
          <li>
            <a href="/admins" class="flex items-center px-4 py-2 text-gray-800 hover:bg-gray-200 rounded-lg">
              <i class="fas fa-user-shield mr-3"></i> 
              <span>Manage Admins</span>
            </a>
          </li>
          <li>
            <a href="/customers" class="flex items-center px-4 py-2 bg-primary-accent text-gray-200 hover:bg-primary-hover rounded-lg">
              <i class="fas fa-users mr-3"></i> 
              <span>Customers</span>
            </a>
          </li>
        </ul>
      </div>

      <div class="px-4 md:px-6 mt-8">
        <h2 class="text-sm font-semibold text-gray-600 uppercase">Others</h2>
        <ul class="mt-4 space-y-2">
          <li>
            <a href="/settings" class="flex items-center px-4 py-2 text-gray-800 hover:bg-gray-200 rounded-lg">
              <i class="fas fa-cogs mr-3"></i> 
              <span>Settings</span>
            </a>
          </li>
          <li>
            <a href="/help" class="flex items-center px-4 py-2 text-gray-800 hover:bg-gray-200 rounded-lg">
              <i class="fas fa-question-circle mr-3"></i> 
              <span>Help</span>
            </a>
          </li>
          <li>
            <a href="/logout" class="flex items-center px-4 py-2 text-gray-800 hover:bg-gray-200 rounded-lg">
              <i class="fas fa-sign-out-alt mr-3"></i> 
              <span>Logout</span>
            </a>
          </li>
        </ul>
      </div>
    </nav>
  </aside>

  <!-- Main Content -->
  <main class="flex-grow p-4 md:py-12">
    <div class="bg-primary-white rounded-lg shadow-lg w-full overflow-hidden">
      <!-- Page Header -->
      <div class="flex flex-col md:flex-row justify-between items-center bg-gray-50 px-4 md:px-6 py-4 border-b space-y-4 md:space-y-0">
        <h1 class="text-xl md:text-2xl font-semibold text-gray-800">All Customers</h1>
        <button class="flex items-center bg-primary-accent text-white px-4 py-2 rounded-md shadow w-full md:w-auto justify-center">
          <i class="fas fa-download mr-2"></i> Export
        </button>
      </div>

      <!-- Search and Filters -->
      <div class="flex flex-col md:flex-row justify-between items-center bg-gray-50 px-4 md:px-6 py-4 border-b space-y-4 md:space-y-0">
        <div class="text-gray-600 w-full md:w-auto text-center md:text-left">Showing Active Members</div>
        <div class="flex flex-col md:flex-row gap-4 w-full md:w-auto">
          <input
            type="text"
            placeholder="Search customers"
            class="border rounded-md px-4 py-2 w-full md:w-60"
          />
          <select class="border rounded-md px-4 py-2 w-full md:w-auto">
            <option value="newest">Sort by: Newest</option>
            <option value="oldest">Sort by: Oldest</option>
          </select>
        </div>
      </div>

      <!-- Customer Table -->
      <div class="overflow-x-auto">
        <table class="w-full table-auto bg-white">
          <thead class="text-left bg-gray-50 text-gray-600 font-semibold text-sm">
            <tr>
              <th class="px-4 md:px-6 py-4">Customer Name</th>
              <th class="px-4 md:px-6 py-4">Phone Number</th>
              <th class="px-4 md:px-6 py-4">Email</th>
              <th class="px-4 md:px-6 py-4 min-w-[120px]">Status</th>
              <th class="px-4 md:px-6 py-4">Actions</th>
            </tr>
          </thead>
          <tbody class="text-gray-800 text-sm">
            <% customers.forEach(customer => { %>
              <tr class="border-b hover:bg-gray-50">
                <td class="px-4 md:px-6 py-4"><%= customer.fullname %></td>
                <td class="px-4 md:px-6 py-4"><%= customer.phonenumber %></td>
                <td class="px-4 md:px-6 py-4 truncate max-w-[200px]"><%= customer.email %></td>
                <td class="px-4 md:px-6 py-4">
                  <span class="px-4 py-2 rounded-md shadow text-white 
                    <%= customer.status === 'Active' ? 'text-green-600' : 'text-primary-accent' %>">
                    <%= customer.status %>
                  </span>
                </td>
                <td class="px-4 md:px-6 py-4">
                  <% if (customer.status === 'Active') { %>
                    <form action="/admin/customers/block/<%= customer._id %>" method="POST">
                      <button
                        type="submit"
                        class="bg-primary-accent text-white px-4 py-2 rounded-md shadow hover:bg-red-700 w-full md:w-auto min-w-[120px]"
                      >
                        Block
                      </button>
                    </form>
                  <% } else { %>
                    <form action="/admin/customers/unblock/<%= customer._id %>" method="POST">
                      <button
                        type="submit"
                        class="bg-green-500 text-white px-4 py-2 rounded-md shadow hover:bg-green-700 w-full md:w-auto min-w-[120px]"
                      >
                        Unblock
                      </button>
                    </form>
                  <% } %>
                </td>
              </tr>
            <% }); %>
          </tbody>
        </table>
      </div>
      
      <!-- Pagination -->
      <div class="flex flex-col md:flex-row justify-between items-center px-4 md:px-6 py-4 bg-gray-50 border-t text-sm text-gray-600 space-y-4 md:space-y-0">
        <span class="text-center md:text-left">Showing 1 to 10 of 100 entries</span>
        <div class="flex gap-2">
          <button class="px-3 py-1 border rounded-md">1</button>
          <button class="px-3 py-1 border rounded-md">2</button>
          <button class="px-3 py-1 border rounded-md">3</button>
        </div>
      </div>
    </div>
  </main>
</div>

<!-- Add this script before the closing body tag -->
<script>
function toggleSidebar() {
  const sidebar = document.getElementById('sidebar');
  sidebar.classList.toggle('hidden');
  sidebar.classList.toggle('fixed');
  sidebar.classList.toggle('top-0');
  sidebar.classList.toggle('left-0');
  sidebar.classList.toggle('z-50');
  sidebar.classList.toggle('h-full');
}
</script>

<%- include('../partials/adminfooter') %>